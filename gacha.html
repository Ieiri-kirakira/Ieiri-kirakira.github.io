<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>お題ガチャ｜キラキラ創作人生</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
  font-family: "Noto Serif JP", serif;
  background: #fff0f7;
  padding: 20px;
}
h1 {
  color: #d6007f;
}
.tabs {
  display: flex;
  gap: 10px;
  margin-bottom: 20px;
}
.tab {
  padding: 10px 16px;
  border-radius: 8px;
  border: 1px solid #ff9ac9;
  background: #fff;
  cursor: pointer;
}
.tab.active {
  background: #ffd6ea;
}
.section {
  display: none;
}
.section.active {
  display: block;
}
button {
  background: #ff7dbb;
  color: #fff;
  border: none;
  padding: 10px 20px;
  border-radius: 10px;
  cursor: pointer;
}
.result {
  margin-top: 20px;
  padding: 20px;
  background: #fff;
  border-radius: 12px;
  border: 2px dashed #ff9ac9;
  font-size: 18px;
}
textarea, input {
  width: 100%;
  margin-bottom: 10px;
}
</style>
</head>

<body>

<h1>お題ガチャ</h1>

<div class="tabs">
  <div class="tab active" onclick="showTab('play')">ガチャを回す</div>
  <div class="tab" onclick="openAdmin()">ガチャを編集</div>
</div>

<!-- ▼ ガチャを回す -->
<div id="play" class="section active">
  <input id="input1" placeholder="せめ">
  <input id="input2" placeholder="うけ">
  <button onclick="drawGacha()">ガチャをまわす</button>
  <div class="result" id="result"></div>
  <p>回した回数：<span id="count">0</span></p>
</div>

<!-- ▼ 管理（最初は非表示） -->
<div id="admin" class="section">
  <h2>ガチャ編集</h2>
  <textarea id="gachaData" rows="8"></textarea>
  <button onclick="saveGacha()">保存</button>
</div>

<script>
/* ===== 設定 ===== */
const IEIRI_ADMIN_405 = "ここを好きな文字に変更";

/* ===== データ ===== */
let gachaList = JSON.parse(localStorage.getItem("gachaList")) || [
  "{input1}が{input2}に微笑んだ",
  "{input2}は{input1}の手を引いた"
];
let count = Number(localStorage.getItem("count")) || 0;

/* ===== タブ切り替え ===== */
function showTab(id) {
  document.querySelectorAll(".tab").forEach(t => t.classList.remove("active"));
  document.querySelectorAll(".section").forEach(s => s.classList.remove("active"));
  document.querySelector(`[onclick*='${id}']`).classList.add("active");
  document.getElementById(id).classList.add("active");
}

/* ===== 管理画面 ===== */
function openAdmin() {
  const pass = prompt("管理者パスワード");
  if (pass !== ADMIN_PASSWORD) return;
  showTab("admin");
  document.getElementById("gachaData").value = gachaList.join("\n");
}

/* ===== ガチャ保存 ===== */
function saveGacha() {
  gachaList = document.getElementById("gachaData").value.split("\n").filter(Boolean);
  localStorage.setItem("gachaList", JSON.stringify(gachaList));
  alert("保存しました");
}

/* ===== ガチャ実行 ===== */
function drawGacha() {
  const i1 = input1.value || "A";
  const i2 = input2.value || "B";
  const text = gachaList[Math.floor(Math.random() * gachaList.length)]
    .replace("{input1}", i1)
    .replace("{input2}", i2);
  result.textContent = text;
  count++;
  localStorage.setItem("count", count);
  document.getElementById("count").textContent = count;
}
</script>

</body>
</html>
